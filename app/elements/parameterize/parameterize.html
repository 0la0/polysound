<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="parameter-sequencer">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
        width: 400px;
        border: 1px solid black;
      }
      .property-row {
        display: flex;
        flex-flow: row;
        flex-wrap: nowrap;
        justify-content: flex-start;

        height: 40px;
        line-height: 40px;
      }
      .property-row__label {
        width: 65px;
      }
      .property-row__slider-field {
        width: 84%;
        height: 85%;
      }
    </style>

    <template is="dom-repeat" items="{{parameterized}}" as="item">
      <div class="property-row">
        <label class="property-row__label">{{item.label}}</label>
        <div class="property-row__slider-field">
          <slider-field-vertical bound-value="{{item.value}}"></slider-field-vertical>
        </div>
      </div>
    </template>

  </template>

  <script>
    (function() {
      'use strict';

      class Parameterize {

        beforeRegister() {
          this.is = 'parameter-sequencer';

          this.properties = {
            parameterized: {
              type: Object,
              notify: true
            }
          };

          this.listeners = {};
        }

        ready() {}
        attached() {}
        detached() {}
        attributeChanged() {}

        resetBoundingClientRect () {
          Array.prototype.slice.call(this.getElementsByTagName('slider-field-vertical'))
            .forEach(sliderField => sliderField.resetBoundingClientRect());
        }

      }
      Polymer(Parameterize);

    })();
  </script>

</dom-module>
