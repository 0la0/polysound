<link rel="import" href="./particle.html">
<link rel="import" href="./runBehaviors.html">
<link rel="import" href="./touchBehaviors.html">
<link rel="import" href="./renderBehaviors.html">

<script>

function importParticleFactory () {

  const RunDirection = {
    CLOCKWISE: 'CLOCKWISE',
    COUNTER_CLOCKWISE : 'COUNTER_CLOCKWISE',
    CASCADE: 'CASCADE',
    FALL: 'FALL'
  };

  let Particle = importParticle();
  let runBehaviors = buildRunBehaviors();
  let touchBehaviors = buildTouchBehaviors();
  let renderBehaviors = buildRenderBehaviors();

  class ParticleFactory {

    static create (x, y, width, height, runBehavior) {

      let particleSystem = new Particle(x, y, width, height);
      if (runBehavior === RunDirection.CLOCKWISE) {
        particleSystem.setRunBehavior(runBehaviors.rotate);
        particleSystem.setTouchBehavior(touchBehaviors.adjustSize);
      }
      else if (runBehavior === RunDirection.COUNTER_CLOCKWISE) {
        particleSystem.changeDirection();
        particleSystem.setRunBehavior(runBehaviors.rotate);
        particleSystem.setTouchBehavior(touchBehaviors.adjustSize);
      }
      else if (runBehavior === RunDirection.CASCADE) {
        particleSystem.setRunBehavior(runBehaviors.cascade);
        particleSystem.setTouchBehavior(touchBehaviors.adjustSize);
      }
      else if (runBehavior === RunDirection.FALL) {
        particleSystem.setRunBehavior(runBehaviors.fall);
        particleSystem.setTouchBehavior(touchBehaviors.setRowValue);
        particleSystem.setRenderBehavior(renderBehaviors.columnSingleCell);
      }
      return particleSystem;
    }
  }

  return ParticleFactory;
}



</script>
